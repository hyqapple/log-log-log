# HTTP、TCP/IP 协议的原理及应用

## 访问网页时发生了什么

### 第一步，找服务器 IP

当用户输入一个网址并按下回车键的时候，浏览器得到了一个域名。而在实际通信过程中，浏览器需要的是一个 IP 地址。为了获得 IP 地址，浏览器会做如下操作，一般我们把浏览器通过域名查找对应 IP 的行为叫做 DNS 解析。

- 先找浏览器的本地的缓存
- 再找电脑硬盘里的 host 文件，有没有记录这个域名和 IP 的映射关系
- 实在没找到，只好通过网络链路去域名供应商那里查询

### 第二步，建立 TCP/IP 连接

- 浏览器获取到了服务器对应 IP，就会向对应 IP 的服务器发送 TCP 连接请求。
- 服务器收到请求后回应，双方多次确认后建立起 TCP 双向连接。

> 从客户端发起连接请求一直到 TCP 连接建立，这个过程，叫做 三次握手。
> 如果请求是 HTTPS 的，还需要在 TCP 连接上，再通过 SSL 或 TLS 提供加密处理数据、验证对方身份以及数据完整性，来保证数据传输的安全。

### 第三步，请求资源

- TCP 连接创建完成，浏览器开始向服务端发送正式的 HTTP 请求的数据包。
- 服务端接受请求，对请求进行解析，经过数据操作后，返回客户端需要的数据包。

### 第四步，浏览器渲染

- 浏览器获取到需要的数据以后，对数据进行拼接、解析、执行，最终将完整的网页绘制在页面上。

### 第五步，浏览器缓存

浏览器拿到服务端返回的数据后，会根据一定的策略进行数据的缓存，这样在下一次请求同样数据的时候，就可直接到缓存拿取，不再请求服务器。

## 经典网络五层模型

### 应用层

应用层包含了我们所说的 HTTP 协议，为各个应用软件提供了很多服务，常见的应用层服务有：HTTP 服务 、FTP 服务 、Email 服务等。应用层屏蔽了底层模型的相关细节，作为应用支持，只提供给使用者一些必要的使用方式。

### 传输层

常见的传输层协议有 TCP 和 UDP ，传输层作为为应用层的基础，定义了“端到端（end to end）”之间数据间的传输方式，比如：两台设备如何建立连接？设备之间需要以何种规范进行数据传输？需要以什么方式进行数据的分片、重组、拼接？这些都是传输层为我们定义好的。

### 网络层

通常我们常说的 IP 协议就位于这一层。网络层为数据在结点之间传输创建逻辑链路，当我们在浏览器敲下域名，浏览器在网络里如何通过这个域名，找到对应的 IP 映射，这个查询的逻辑关系和链路，是网络层规范和定义的。

### 数据链路层

数据链路层在通信实体间建立数据链路连接，物理设备连接完成以后，需要相应的软件和驱动来连接和打通这些物理设备，创建电路的连接。

### 物理层

定义物理设备如何传输数据，常见的物理层有网线，光缆，网卡，声卡等，物理层是一切软件的基础。

## URI、URL 和 URN

## links

- [HTTP、TCP/IP 协议的原理及应用](https://juejin.im/post/5d75c116f265da03d9255dd1#heading-28)
